<div align="center">

# üïâÔ∏è GeetaVerse Backend

### _AI-Powered Bhagavad Gita Explorer - Production-Ready REST API_

[![NestJS](https://img.shields.io/badge/NestJS-11.x-E0234E?logo=nestjs&logoColor=white)](https://nestjs.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-6.x-2D3748?logo=prisma&logoColor=white)](https://www.prisma.io/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14+-336791?logo=postgresql&logoColor=white)](https://www.postgresql.org/)
[![OpenRouter](https://img.shields.io/badge/OpenRouter-AI-7C3AED?logo=openai&logoColor=white)](https://openrouter.ai/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

**A modern, enterprise-grade backend API for exploring the timeless wisdom of the Bhagavad Gita with AI-powered insights, user management, and premium features.**

[Features](#-features) ‚Ä¢ [Quick Start](#-quick-start) ‚Ä¢ [API Docs](#-api-endpoints) ‚Ä¢ [AI Setup](#-ai-features-setup) ‚Ä¢ [Deployment](#-deployment)

</div>

---

## üìë Table of Contents

- [‚ú® Features](#-features)
- [üöÄ Quick Start](#-quick-start)
- [üì¶ Tech Stack](#-tech-stack)
- [üóÑÔ∏è Database Schema](#Ô∏è-database-schema)
- [üîå API Endpoints](#-api-endpoints)
- [ü§ñ AI Features Setup](#-ai-features-setup)
- [üîê Authentication](#-authentication)
- [üë§ User Features](#-user-features)
- [üëë Admin Features](#-admin-features)
- [üìä Analytics](#-analytics)
- [üí≥ Payment Integration](#-payment-integration)
- [üõ†Ô∏è Available Scripts](#Ô∏è-available-scripts)
- [üåç Environment Variables](#-environment-variables)
- [üêõ Troubleshooting](#-troubleshooting)
- [üìÅ Project Structure](#-project-structure)
- [üö¢ Deployment](#-deployment)
- [ü§ù Contributing](#-contributing)

---

## ‚ú® Features

### üîê **Authentication & Authorization**

- ‚úÖ JWT-based authentication (access + refresh tokens)
- ‚úÖ Secure password hashing with bcryptjs
- ‚úÖ Role-based access control (ADMIN, USER, PREMIUM)
- ‚úÖ Session management with database storage
- ‚úÖ Protected routes with NestJS guards
- ‚úÖ Automatic token refresh mechanism

### üìö **Bhagavad Gita Content**

- ‚úÖ All 18 chapters with complete metadata
- ‚úÖ 700+ verses with multiple translations
- ‚úÖ Sanskrit text with transliterations
- ‚úÖ Word-by-word meanings
- ‚úÖ Multiple scholarly commentaries
- ‚úÖ Advanced search functionality
- ‚úÖ Verse of the Day feature
- ‚úÖ Chapter summaries in English & Hindi

### üë§ **User Management**

- ‚úÖ User registration & login
- ‚úÖ Profile management
- ‚úÖ Personal notes on verses (CRUD)
- ‚úÖ Bookmark favorite verses with tags
- ‚úÖ Pagination support for all lists
- ‚úÖ User activity tracking

### ü§ñ **AI-Powered Features** (OpenRouter)

- ‚úÖ **Verse Insights** - Deep philosophical explanations
- ‚úÖ **Chapter Summaries** - Modern, accessible chapter overviews
- ‚úÖ **Daily Reflections** - Personalized spiritual wisdom
- ‚úÖ **Q&A System** - Ask questions about the Gita
- ‚úÖ **DeepSeek R1T2 Chimera (Free)** - No API costs!
- ‚úÖ Smart token optimization
- ‚úÖ Graceful error handling

### üí≥ **Premium Features**

- ‚úÖ Stripe payment integration
- ‚úÖ Subscription management
- ‚úÖ Premium content access control
- ‚úÖ Admin-granted premium upgrades
- ‚úÖ Expiration tracking

### üëë **Admin Dashboard**

- ‚úÖ Complete user management (CRUD)
- ‚úÖ Grant/revoke premium access
- ‚úÖ Toggle user active status
- ‚úÖ Platform statistics
- ‚úÖ Popular verses analytics
- ‚úÖ User engagement metrics

### üõ†Ô∏è **Developer Experience**

- ‚úÖ Full Swagger/OpenAPI documentation at `/docs`
- ‚úÖ Comprehensive error handling with filters
- ‚úÖ Request/Response logging interceptor
- ‚úÖ Rate limiting (100 requests/minute)
- ‚úÖ Environment validation with Zod
- ‚úÖ CORS configuration
- ‚úÖ TypeScript strict mode
- ‚úÖ Database seeding with test data

---

## üöÄ Quick Start

### Prerequisites

Before you begin, ensure you have:

- ‚úÖ **Node.js** >= 18.x ([Download](https://nodejs.org/))
- ‚úÖ **PostgreSQL** >= 14.x ([Download](https://www.postgresql.org/download/))
- ‚úÖ **pnpm** (recommended) or npm
  ```bash
  npm install -g pnpm
  ```

### Installation in 5 Steps

```bash
# 1Ô∏è‚É£ Clone the repository
git clone https://github.com/KrishnaGrg1/GeetaVerse-Backend.git
cd GeetaVerse-Backend

# 2Ô∏è‚É£ Install dependencies
pnpm install

# 3Ô∏è‚É£ Setup environment variables
cp .env.example .env
# Edit .env with your database URL and secrets

# 4Ô∏è‚É£ Setup database (generates Prisma client, runs migrations, seeds data)
pnpm run db:setup

# 5Ô∏è‚É£ Start development server
pnpm run start:dev
```

### Access Your API

- üåê **API Base**: http://localhost:3000/api
- üìö **Swagger Docs**: http://localhost:3000/docs
- üóÑÔ∏è **Prisma Studio**: Run `pnpm run prisma:studio`

### Test with Seed Accounts

| Role       | Email                  | Password     |
| ---------- | ---------------------- | ------------ |
| üëë Admin   | admin@geetaverse.com   | Admin@123456 |
| ‚≠ê Premium | premium@geetaverse.com | Premium@123  |
| üë§ User    | user@geetaverse.com    | User@123     |

---

## üì¶ Tech Stack

| Category           | Technology            | Version |
| ------------------ | --------------------- | ------- |
| **Framework**      | NestJS                | 11.x    |
| **Language**       | TypeScript            | 5.x     |
| **Database**       | PostgreSQL            | 14+     |
| **ORM**            | Prisma                | 6.x     |
| **Authentication** | JWT + Passport        | Latest  |
| **Validation**     | Zod + class-validator | Latest  |
| **API Docs**       | Swagger/OpenAPI       | 7.x     |
| **Password Hash**  | bcryptjs              | 2.x     |
| **Rate Limiting**  | @nestjs/throttler     | 6.x     |
| **AI**             | OpenRouter + DeepSeek | Free    |
| **Payments**       | Stripe                | Latest  |

---

## üóÑÔ∏è Database Schema

```prisma
model User {
  id               String      @id @default(uuid())
  name             String
  email            String      @unique
  password         String      // bcrypt hashed
  role             UserRole    @default(USER)  // ADMIN | USER | PREMIUM
  isPremium        Boolean     @default(false)
  premiumExpiresAt DateTime?
  emailVerified    Boolean     @default(false)
  isActive         Boolean     @default(true)
  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt

  notes            Note[]
  bookmarks        Bookmark[]
  sessions         Session[]
}

model Note {
  id        String   @id @default(uuid())
  title     String?
  content   String   @db.Text
  verseRef  String   // e.g., "BG2.47"
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Bookmark {
  id        String   @id @default(uuid())
  verseRef  String   // e.g., "BG2.47"
  tags      String[] // Array of tags for organization
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([userId, verseRef])  // Prevent duplicate bookmarks
}

model Session {
  id           String   @id @default(uuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  refreshToken String   @unique
  expiresAt    DateTime
  ipAddress    String?
  userAgent    String?
  createdAt    DateTime @default(now())
}

enum UserRole {
  ADMIN
  USER
  PREMIUM
}
```

---

## üîå API Endpoints

### üîê Authentication (`/api/auth`)

| Method | Endpoint         | Description          | Auth Required |
| ------ | ---------------- | -------------------- | ------------- |
| POST   | `/auth/register` | Register new user    | ‚ùå            |
| POST   | `/auth/login`    | Login user           | ‚ùå            |
| POST   | `/auth/refresh`  | Refresh access token | ‚ùå            |
| POST   | `/auth/logout`   | Logout user          | ‚úÖ            |

**Example - Register:**

```bash
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com",
    "password": "SecurePass123!"
  }'
```

**Example - Login:**

```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "john@example.com",
    "password": "SecurePass123!"
  }'
```

---

### üìö Bhagavad Gita Content (`/api/geeta`)

| Method | Endpoint                              | Description              | Auth Required |
| ------ | ------------------------------------- | ------------------------ | ------------- |
| GET    | `/geeta/chapters`                     | Get all 18 chapters      | ‚ùå            |
| GET    | `/geeta/chapters/:id`                 | Get chapter details      | ‚ùå            |
| GET    | `/geeta/chapters/:id/verses`          | Get verses in chapter    | ‚ùå            |
| GET    | `/geeta/chapters/:id/verses/:verseId` | Get verse details        | ‚ùå            |
| GET    | `/geeta/search?q=karma`               | Search verses            | ‚ùå            |
| GET    | `/geeta/verse-of-the-day`             | Get daily featured verse | ‚ùå            |

**Example - Get All Chapters:**

```bash
curl http://localhost:3000/api/geeta/chapters
```

**Example - Search Verses:**

```bash
curl "http://localhost:3000/api/geeta/search?q=dharma&chapter=2"
```

---

### üë§ User Features (`/api/user`)

| Method | Endpoint                      | Description          | Auth Required |
| ------ | ----------------------------- | -------------------- | ------------- |
| GET    | `/user/profile`               | Get user profile     | ‚úÖ            |
| POST   | `/user/notes`                 | Create note on verse | ‚úÖ            |
| GET    | `/user/notes?page=1&limit=10` | Get all notes        | ‚úÖ            |
| GET    | `/user/notes/:id`             | Get specific note    | ‚úÖ            |
| PUT    | `/user/notes/:id`             | Update note          | ‚úÖ            |
| DELETE | `/user/notes/:id`             | Delete note          | ‚úÖ            |
| POST   | `/user/bookmarks`             | Add bookmark         | ‚úÖ            |
| GET    | `/user/bookmarks`             | Get all bookmarks    | ‚úÖ            |
| DELETE | `/user/bookmarks/:id`         | Remove bookmark      | ‚úÖ            |

**Example - Create Note:**

```bash
curl -X POST http://localhost:3000/api/user/notes \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Inspiring Verse",
    "content": "This verse teaches us about karma yoga",
    "verseRef": "BG2.47"
  }'
```

---

### ü§ñ AI Features (`/api/ai`)

| Method | Endpoint                                     | Description              | Auth Required |
| ------ | -------------------------------------------- | ------------------------ | ------------- |
| GET    | `/ai/insight/:verseRef?verseText=...`        | Get AI insight for verse | ‚úÖ            |
| GET    | `/ai/summary/:chapterNumber?chapterName=...` | Get AI chapter summary   | ‚úÖ            |
| GET    | `/ai/daily-reflection?verseText=...`         | Get daily reflection     | ‚ùå            |
| POST   | `/ai/ask`                                    | Ask AI a question        | ‚úÖ            |

**Example - Get Verse Insight:**

```bash
curl -X GET "http://localhost:3000/api/ai/insight/BG2.47?verseText=You%20have%20the%20right%20to%20work" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**Example - Ask AI:**

```bash
curl -X POST http://localhost:3000/api/ai/ask \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "What is dharma according to the Bhagavad Gita?",
    "context": "I want to understand my duty"
  }'
```

---

### üëë Admin Features (`/api/admin`)

| Method | Endpoint                         | Description          | Auth Required | Role  |
| ------ | -------------------------------- | -------------------- | ------------- | ----- |
| GET    | `/admin/users?page=1&limit=10`   | List all users       | ‚úÖ            | ADMIN |
| GET    | `/admin/users/:id`               | Get user details     | ‚úÖ            | ADMIN |
| PUT    | `/admin/users/:id/toggle-status` | Enable/disable user  | ‚úÖ            | ADMIN |
| PUT    | `/admin/users/:id/grant-premium` | Grant premium access | ‚úÖ            | ADMIN |
| DELETE | `/admin/users/:id`               | Delete user          | ‚úÖ            | ADMIN |
| GET    | `/admin/stats`                   | Platform statistics  | ‚úÖ            | ADMIN |

---

### üí≥ Payment (`/api/payment`)

| Method | Endpoint                           | Description            | Auth Required |
| ------ | ---------------------------------- | ---------------------- | ------------- |
| POST   | `/payment/create-checkout-session` | Create Stripe checkout | ‚úÖ            |
| POST   | `/payment/verify/:sessionId`       | Verify payment         | ‚úÖ            |

---

## ü§ñ AI Features Setup

### Why DeepSeek R1T2 Chimera?

We use **DeepSeek R1T2 Chimera (Free)** via OpenRouter because:

- ‚úÖ **100% Free** - No API costs
- ‚úÖ **Powerful reasoning** - Optimized for philosophical texts
- ‚úÖ **High quality** - Excellent for spiritual content
- ‚úÖ **Fast responses** - Low latency
- ‚úÖ **No rate limits** - Generous free tier

### Setup in 3 Steps

#### 1Ô∏è‚É£ Get Your FREE API Key

Visit [OpenRouter.ai](https://openrouter.ai/keys) and:

1. Sign up for a free account
2. Navigate to "Keys" section
3. Create a new API key
4. Copy your key (starts with `sk-or-v1-...`)

#### 2Ô∏è‚É£ Configure Environment

Add to your `.env` file:

```env
# OpenRouter AI Configuration
OPENAI_API_KEY=sk-or-v1-your-api-key-here
OPENAI_MODEL=tngtech/deepseek-r1t2-chimera:free
OPENAI_SITE_URL=https://geetaverse.com
OPENAI_SITE_NAME=GeetaVerse
```

#### 3Ô∏è‚É£ Install OpenAI SDK

```bash
pnpm add openai
```

### AI Endpoints Overview

#### üîÆ Verse Insight

Get deep philosophical explanations for any verse.

```bash
GET /api/ai/insight/BG2.47?verseText=YOUR_VERSE_TEXT
```

**Response:**

```json
{
  "success": true,
  "data": {
    "insight": "This verse teaches the fundamental principle of Karma Yoga..."
  },
  "message": "Insight generated successfully"
}
```

#### üìñ Chapter Summary

Modern, accessible chapter summaries.

```bash
GET /api/ai/summary/2?chapterName=Sankhya%20Yoga&chapterSummary=...
```

#### üåÖ Daily Reflection

Get personalized spiritual wisdom (public endpoint).

```bash
GET /api/ai/daily-reflection?verseText=Perform%20your%20duty
```

#### ‚ùì Q&A System

Ask questions about the Bhagavad Gita.

```bash
POST /api/ai/ask
{
  "question": "How can I practice detachment in modern life?",
  "context": "I work in a corporate job"
}
```

### Token Optimization

AI endpoints are optimized for cost and performance:

| Feature           | Max Tokens | Use Case                |
| ----------------- | ---------- | ----------------------- |
| Verse Insights    | 500        | Detailed explanations   |
| Chapter Summaries | 800        | Comprehensive overviews |
| Daily Reflections | 200        | Quick wisdom            |
| Q&A               | 600        | Thoughtful answers      |

### Testing AI Features

```bash
# 1. Login to get access token
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "user@geetaverse.com", "password": "User@123"}'

# 2. Test Daily Reflection (no auth needed)
curl "http://localhost:3000/api/ai/daily-reflection?verseText=Test"

# 3. Test Verse Insight (requires auth)
curl -X GET "http://localhost:3000/api/ai/insight/BG2.47?verseText=Test" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

---

## üîê Authentication

### How It Works

1. **Register/Login** ‚Üí Receive access token (15min) + refresh token (7 days)
2. **Access Protected Routes** ‚Üí Include `Authorization: Bearer {accessToken}`
3. **Token Expires** ‚Üí Use refresh token to get new access token
4. **Logout** ‚Üí Invalidate refresh token

### JWT Payload Structure

```typescript
{
  sub: "user-id",           // User ID
  email: "user@example.com", // User email
  role: "USER",             // USER | PREMIUM | ADMIN
  iat: 1234567890,          // Issued at
  exp: 1234568790           // Expires at
}
```

### Protected Routes

Use the `@UseGuards(JwtAuthGuard)` decorator:

```typescript
@Get('profile')
@UseGuards(JwtAuthGuard)
async getProfile(@CurrentUser() user: User) {
  return user;
}
```

### Role-Based Access

Use `@Roles()` decorator with `RolesGuard`:

```typescript
@Get('admin/stats')
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles(UserRole.ADMIN)
async getStats() {
  // Only admins can access
}
```

---

## üë§ User Features

### Personal Notes

Users can create personal notes on any verse:

- **Create**: Add title, content, and verse reference
- **Read**: View all notes with pagination
- **Update**: Edit existing notes
- **Delete**: Remove notes
- **Search**: Filter by verse reference

### Bookmarks with Tags

Save favorite verses for quick access:

- Add/remove bookmarks
- Tag bookmarks for organization (e.g., "favorite", "study", "practice")
- Filter by tags
- Unique constraint (one bookmark per verse per user)

---

## üëë Admin Features

### User Management

Admins can:

- View all users with pagination
- Filter by role (ADMIN, USER, PREMIUM)
- View detailed user information
- Enable/disable user accounts
- Grant or revoke premium access
- Delete users (soft delete recommended)

### Platform Analytics

Access comprehensive statistics:

```typescript
{
  totalUsers: 1250,
  activeUsers: 980,
  premiumUsers: 120,
  totalNotes: 3500,
  totalBookmarks: 2800,
  popularVerses: [
    { verseRef: "BG2.47", views: 1520 },
    { verseRef: "BG2.14", views: 890 }
  ]
}
```

---

## üìä Analytics

### Track Verse Views

```typescript
await analyticsService.trackVerseView(verseRef, userId);
```

### Get Popular Verses

```bash
GET /api/admin/analytics/popular-verses?limit=10
```

### User Engagement Stats

```bash
GET /api/admin/analytics/user-engagement/:userId
```

---

## üí≥ Payment Integration

### Stripe Setup

1. Get Stripe keys from [dashboard.stripe.com](https://dashboard.stripe.com)
2. Add to `.env`:

```env
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PREMIUM_PRICE_ID=price_...
```

### Create Checkout Session

```bash
POST /api/payment/create-checkout-session
{
  "priceId": "price_1234567890",
  "successUrl": "https://geetaverse.com/success",
  "cancelUrl": "https://geetaverse.com/cancel"
}
```

### Verify Payment

```bash
POST /api/payment/verify/cs_test_1234567890
```

---

## üõ†Ô∏è Available Scripts

```bash
# Development
pnpm run start          # Start app
pnpm run start:dev      # Start with watch mode
pnpm run start:debug    # Start with debug mode

# Production
pnpm run build          # Build for production
pnpm run start:prod     # Run production build

# Database
pnpm run db:setup       # Complete setup (generate + migrate + seed)
pnpm run prisma:generate # Generate Prisma client
pnpm run prisma:migrate # Run migrations
pnpm run prisma:seed    # Seed database
pnpm run prisma:studio  # Open Prisma Studio (GUI)

# Code Quality
pnpm run lint           # Lint code
pnpm run format         # Format code with Prettier
pnpm run test           # Run unit tests
pnpm run test:watch     # Run tests in watch mode
pnpm run test:cov       # Generate test coverage
pnpm run test:e2e       # Run end-to-end tests
```

---

## üåç Environment Variables

### Required Variables

```env
# Database (REQUIRED)
DATABASE_URL="postgresql://user:password@localhost:5432/geetaverse"

# JWT Secrets (REQUIRED - min 32 characters)
JWT_SECRET="your-super-secret-jwt-key-change-in-production-min-32-chars"
JWT_REFRESH_SECRET="your-refresh-secret-change-in-production-min-32-chars"
```

### Optional Variables

```env
# Application
NODE_ENV=development
PORT=3000
API_PREFIX=api
CORS_ORIGIN=*

# JWT Configuration
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Rate Limiting
THROTTLE_TTL=60          # Time window in seconds
THROTTLE_LIMIT=100       # Max requests per window

# Stripe Payment (Optional)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PREMIUM_PRICE_ID=price_...

# OpenRouter AI (Optional - for AI features)
OPENAI_API_KEY=sk-or-v1-...
OPENAI_MODEL=tngtech/deepseek-r1t2-chimera:free
OPENAI_SITE_URL=https://geetaverse.com
OPENAI_SITE_NAME=GeetaVerse
```

### Get Your API Keys

- **Database**: [Neon.tech](https://neon.tech) (Free PostgreSQL)
- **OpenRouter**: [openrouter.ai/keys](https://openrouter.ai/keys) (Free AI)
- **Stripe**: [dashboard.stripe.com](https://dashboard.stripe.com) (Payment)

---

## üêõ Troubleshooting

### Database Connection Error

```bash
# Check PostgreSQL is running
pg_isready

# Check connection string
psql "postgresql://user:password@localhost:5432/geetaverse"

# Create database if missing
createdb geetaverse
```

### Prisma Client Not Found

```bash
npx prisma generate
```

### JWT Validation Errors

- Ensure JWT secrets are **at least 32 characters** long
- Check token expiration times
- Verify Authorization header format: `Bearer {token}`

### TypeScript Compilation Errors

```bash
# Clean reinstall
rm -rf node_modules pnpm-lock.yaml dist
pnpm install
npx prisma generate
pnpm run build
```

### Port Already in Use

```bash
# Kill process on port 3000
lsof -ti:3000 | xargs kill -9

# Or change port in .env
PORT=3001
```

### AI Features Not Working

1. Check API key is set in `.env`
2. Verify OpenAI package is installed: `pnpm add openai`
3. Check OpenRouter dashboard for usage/errors
4. Test with a simple curl request

---

## üìÅ Project Structure

```
bhagwat-geeta-backend/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # Database schema
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                # Seed data with test accounts
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ auth/                  # üîê Authentication module
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/              # Data transfer objects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guards/           # JWT & Roles guards
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ strategies/       # Passport strategies
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ user/                  # üë§ User management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/              # Note & Bookmark DTOs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ geeta/                 # üìö Bhagavad Gita content
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chapter/          # 18 chapter JSON files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slok/             # 700+ verse JSON files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ geeta.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ geeta.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geeta.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ai/                    # ü§ñ AI features
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompts/          # AI prompt templates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ admin/                 # üëë Admin operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ payment/               # üí≥ Stripe integration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payment.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ analytics/             # üìä Analytics service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.module.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ common/                # üîß Shared utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decorators/       # Custom decorators
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/              # Response DTOs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filters/          # Exception filters
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guards/           # Custom guards
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interceptors/     # Logging interceptor
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/            # Helper functions
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                # ‚öôÔ∏è Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.config.ts     # App configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma.config.ts  # Prisma configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ env.validation.ts # Zod validation
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                # üóÑÔ∏è Prisma service
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.service.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts          # Root application module
‚îÇ   ‚îî‚îÄ‚îÄ main.ts                # Bootstrap & Swagger setup
‚îÇ
‚îú‚îÄ‚îÄ test/                      # üß™ Tests
‚îÇ   ‚îú‚îÄ‚îÄ app.e2e-spec.ts       # E2E tests
‚îÇ   ‚îî‚îÄ‚îÄ jest-e2e.json         # Jest config
‚îÇ
‚îú‚îÄ‚îÄ .env.example               # Environment template
‚îú‚îÄ‚îÄ .gitignore                # Git ignore file
‚îú‚îÄ‚îÄ nest-cli.json             # NestJS CLI config
‚îú‚îÄ‚îÄ package.json              # Dependencies & scripts
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript config
‚îú‚îÄ‚îÄ tsconfig.build.json       # Build TypeScript config
‚îî‚îÄ‚îÄ README.md                  # This file
```

---

## üö¢ Deployment

### Production Checklist

- [ ] Change all secrets in `.env` (JWT, database)
- [ ] Set `NODE_ENV=production`
- [ ] Configure proper CORS origins (not `*`)
- [ ] Setup SSL/TLS certificates
- [ ] Configure database backups
- [ ] Setup monitoring (Sentry, LogRocket, etc.)
- [ ] Enable production logging
- [ ] Configure Stripe webhooks
- [ ] Review security headers
- [ ] Setup CI/CD pipeline
- [ ] Load test your API
- [ ] Setup CDN for static assets
- [ ] Configure reverse proxy (Nginx)

### Deployment Platforms

#### üöÄ **Railway** (Recommended)

```bash
# Install Railway CLI
npm install -g @railway/cli

# Login
railway login

# Initialize project
railway init

# Add PostgreSQL
railway add

# Deploy
railway up
```

#### üåê **Render**

1. Create account at render.com
2. Create new Web Service
3. Connect your GitHub repo
4. Add PostgreSQL database
5. Set environment variables
6. Deploy!

#### üî∑ **Heroku**

```bash
# Install Heroku CLI
npm install -g heroku

# Login
heroku login

# Create app
heroku create geetaverse-api

# Add PostgreSQL
heroku addons:create heroku-postgresql:hobby-dev

# Set environment variables
heroku config:set NODE_ENV=production
heroku config:set JWT_SECRET=your-secret

# Deploy
git push heroku main
```

---

## üß™ Testing

```bash
# Unit tests
pnpm run test

# E2E tests
pnpm run test:e2e

# Test coverage
pnpm run test:cov

# Watch mode
pnpm run test:watch
```

---

## ü§ù Contributing

We welcome contributions! Please:

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'feat: add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## üìú License

This project is licensed under the **MIT License**.

---

## üë®‚Äçüíª Author

**Krishna Bahadur Gurung**

- GitHub: [@KrishnaGrg1](https://github.com/KrishnaGrg1)

---

## üôè Acknowledgments

- [NestJS](https://nestjs.com/) - Progressive Node.js framework
- [Prisma](https://www.prisma.io/) - Next-generation ORM
- [OpenRouter](https://openrouter.ai/) - Unified AI API access
- [DeepSeek](https://www.deepseek.com/) - Open-source AI model
- Bhagavad Gita translators and scholars

---

## üìû Support

- üìñ Documentation: Read this README and Swagger docs at `/docs`
- üêõ Bug Reports: [Create an issue](https://github.com/KrishnaGrg1/GeetaVerse-Backend/issues)
- üí° Feature Requests: [Open a discussion](https://github.com/KrishnaGrg1/GeetaVerse-Backend/discussions)

---

<div align="center">

### ‚≠ê If this project helped you, please consider giving it a star!

**Made with ‚ù§Ô∏è for spiritual seekers worldwide** üïâÔ∏è

_"You have the right to perform your prescribed duties, but you are not entitled to the fruits of your actions."_  
**‚Äî Bhagavad Gita 2.47**

---

**[‚¨Ü Back to Top](#Ô∏è-geetaverse-backend)**

</div>
